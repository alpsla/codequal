@codequal/agents:test
cache miss, executing 432763163efabc70

> @codequal/agents@0.1.0 test
> jest --testPathIgnorePatterns=tests/archive/

PASS src/multi-agent/evaluation/__tests__/language-support.test.ts (5.976 s)
  ● Console

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 96.4 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role codeQuality with score 93.5 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role codeQuality with score 92.6 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role codeQuality with score 94 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 94.6 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role codeQuality with score 94.6 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role codeQuality with score 93.5 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality, security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role security with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 97.9 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 70 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

PASS src/multi-agent/__tests__/complete-integration.test.ts (6.427 s)
  ● Console

    console.error
Error: ERROR] [MultiAgentExecutor] Error executing agent primary: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/complete-integration.test.ts:298:48)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.createAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:411:25)
          at MultiAgentExecutor.createAgents (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:310:33)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:164:18)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/complete-integration.test.ts:325:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:986:19)
          at async Promise.all (index 0)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/complete-integration.test.ts:325:22)

PASS src/multi-agent/__tests__/edge-cases.test.ts (6.476 s)
  ● Console

    console.log
      Final config: {
        "name": "Cascading Failure Test",
        "strategy": "parallel",
        "agents": [
          {
            "provider": "claude",
            "agentType": "claude",
            "role": "codeQuality",
            "position": "primary"
          },
          {
            "provider": "openai",
            "agentType": "openai",
            "role": "security",
            "position": "secondary"
          },
          {
            "provider": "deepseek-coder",
            "agentType": "deepseek-coder",
            "role": "performance",
            "position": "secondary"
          }
        ],
        "fallbackEnabled": true,
        "fallbackAgents": [
          {
            "role": "codeQuality",
            "position": "fallback",
            "priority": 1,
            "parameters": {}
          }
        ],
        "fallbackTimeout": 30000,
        "combineResults": true,
        "maxConcurrentAgents": 3
      }

      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:297:15)

    console.log
      Fixed config: {
        "name": "Cascading Failure Test",
        "strategy": "parallel",
        "agents": [
          {
            "provider": "claude",
            "agentType": "claude",
            "role": "codeQuality",
            "position": "primary"
          },
          {
            "provider": "openai",
            "agentType": "openai",
            "role": "security",
            "position": "secondary"
          },
          {
            "provider": "deepseek-coder",
            "agentType": "deepseek-coder",
            "role": "performance",
            "position": "secondary"
          }
        ],
        "fallbackEnabled": true,
        "fallbackAgents": [
          {
            "role": "codeQuality",
            "position": "fallback",
            "priority": 1,
            "parameters": {}
          }
        ],
        "fallbackTimeout": 30000,
        "combineResults": true,
        "maxConcurrentAgents": 3
      }

      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:313:15)

    console.error
Error: ERROR] [MultiAgentExecutor] Error executing agent primary: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.createAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:411:25)
          at MultiAgentExecutor.createAgents (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:310:33)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:164:18)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:986:19)
          at async Promise.all (index 0)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Error executing agent secondary-0: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.createAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:411:25)
          at MultiAgentExecutor.createAgents (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:316:37)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:164:18)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:986:19)
          at async Promise.all (index 1)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Error executing agent secondary-1: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.createAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:411:25)
          at MultiAgentExecutor.createAgents (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:316:37)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:164:18)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:986:19)
          at async Promise.all (index 2)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Fallback agent undefined failed: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.executeFallback (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1257:40)
          at MultiAgentExecutor.executeAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1041:43)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at async Promise.all (index 0)
          at MultiAgentExecutor.executeParallel (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:511:21)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:178:28)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:22)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1300:21)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 0)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] All fallback agents failed for primary undefined

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1305:17)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 0)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Fallback agent undefined failed: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.executeFallback (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1257:40)
          at MultiAgentExecutor.executeAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1041:43)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at async Promise.all (index 1)
          at MultiAgentExecutor.executeParallel (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:511:21)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:178:28)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:22)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1300:21)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 1)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] All fallback agents failed for secondary-0 undefined

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1305:17)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 1)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Fallback agent undefined failed: Error: Simulated failure
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:273:46)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.executeFallback (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1257:40)
          at MultiAgentExecutor.executeAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:1041:43)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at async Promise.all (index 2)
          at MultiAgentExecutor.executeParallel (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:511:21)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:178:28)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:322:22)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1300:21)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 2)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] All fallback agents failed for secondary-1 undefined

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeFallback (src/multi-agent/executor.ts:1305:17)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:1041:32)
          at async Promise.all (index 2)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:322:22)

    console.error
Error: ERROR] [MultiAgentExecutor] Error executing agent primary: Error: Network error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:365:50)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as createAgent] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:113:19)
          at MultiAgentExecutor.createAgent (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:411:25)
          at MultiAgentExecutor.createAgents (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:310:33)
          at MultiAgentExecutor.execute (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/executor.ts:164:18)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/src/multi-agent/__tests__/edge-cases.test.ts:383:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentExecutor.executeAgent (src/multi-agent/executor.ts:986:19)
          at async Promise.all (index 0)
      at MultiAgentExecutor.executeParallel (src/multi-agent/executor.ts:511:21)
      at MultiAgentExecutor.execute (src/multi-agent/executor.ts:178:28)
      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:383:22)

    console.log
      Final config: {
        "name": "Token Usage Test",
        "strategy": "parallel",
        "agents": [
          {
            "provider": "claude",
            "agentType": "claude",
            "role": "codeQuality",
            "position": "primary",
            "parameters": {}
          },
          {
            "provider": "openai",
            "agentType": "openai",
            "role": "security",
            "position": "secondary",
            "parameters": {}
          },
          {
            "provider": "deepseek-coder",
            "agentType": "deepseek-coder",
            "role": "performance",
            "position": "secondary",
            "parameters": {}
          },
          {
            "role": "educational",
            "position": "secondary",
            "parameters": {}
          }
        ],
        "fallbackEnabled": false,
        "fallbackAgents": [],
        "fallbackTimeout": 30000,
        "combineResults": true,
        "maxConcurrentAgents": 3
      }

      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:591:15)

    console.log
      Fixed config: {
        "name": "Token Usage Test",
        "strategy": "parallel",
        "agents": [
          {
            "provider": "claude",
            "agentType": "claude",
            "role": "codeQuality",
            "position": "primary",
            "parameters": {}
          },
          {
            "provider": "openai",
            "agentType": "openai",
            "role": "security",
            "position": "secondary",
            "parameters": {}
          },
          {
            "provider": "deepseek-coder",
            "agentType": "deepseek-coder",
            "role": "performance",
            "position": "secondary",
            "parameters": {}
          },
          {
            "role": "educational",
            "position": "secondary",
            "parameters": {}
          }
        ],
        "fallbackEnabled": false,
        "fallbackAgents": [],
        "fallbackTimeout": 30000,
        "combineResults": true,
        "maxConcurrentAgents": 3
      }

      at Object.<anonymous> (src/multi-agent/__tests__/edge-cases.test.ts:607:15)

FAIL src/multi-agent/__tests__/integration.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

FAIL src/multi-agent/__tests__/specialized-agents.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

PASS src/multi-agent/__tests__/validator.test.ts
PASS src/multi-agent/__tests__/agent-creation-validation.test.ts
  ● Console

    console.log
      [WARN] [MultiAgentExecutor] Configuration warnings: Fallback is enabled but no fallback agents are defined undefined

      at Object.warn (tests/__mocks__/@codequal/core/utils/index.ts:37:15)

    console.error
      Failed to create primary: API authentication failed

      111 |       } catch (error) {
      112 |         // @ts-ignore - Error type in tests
    > 113 |         console.error(`Failed to create ${agentName}: ${error.message}`);
          |                 ^
      114 |         
      115 |         // Find the first available fallback
      116 |         for (const [fallbackName, fallbackAgent] of fallbackAgents.entries()) {

      at createAgentWithFallback (src/multi-agent/__tests__/agent-creation-validation.test.ts:113:17)
      at Object.<anonymous> (src/multi-agent/__tests__/agent-creation-validation.test.ts:135:25)

    console.log
      Trying fallback fallback-agent...

      at createAgentWithFallback (src/multi-agent/__tests__/agent-creation-validation.test.ts:117:19)

    console.log
      [WARN] [MultiAgentExecutor] Configuration warnings: Fallback is enabled but no fallback agents are defined undefined

      at Object.warn (tests/__mocks__/@codequal/core/utils/index.ts:37:15)

    console.log
      [WARN] [MultiAgentExecutor] Configuration warnings: Fallback is enabled but no fallback agents are defined undefined

      at Object.warn (tests/__mocks__/@codequal/core/utils/index.ts:37:15)

    console.log
      Attempt 1 failed, retrying in 100ms...

      at tryCreate (src/multi-agent/__tests__/agent-creation-validation.test.ts:248:19)

    console.log
      Attempt 2 failed, retrying in 200ms...

      at tryCreate (src/multi-agent/__tests__/agent-creation-validation.test.ts:248:19)

    console.log
      [WARN] [MultiAgentExecutor] Configuration warnings: Fallback is enabled but no fallback agents are defined undefined

      at Object.warn (tests/__mocks__/@codequal/core/utils/index.ts:37:15)

    console.log
      Failed to create agent with deepseek-coder: API authentication failed

      at createAgentWithReliabilityPriority (src/multi-agent/__tests__/agent-creation-validation.test.ts:342:19)

    console.log
      [WARN] [MultiAgentExecutor] Configuration warnings: Fallback is enabled but no fallback agents are defined undefined

      at Object.warn (tests/__mocks__/@codequal/core/utils/index.ts:37:15)

PASS src/multi-agent/__tests__/fallback-provider.test.ts
PASS tests/gemini-agent.test.ts
  ● Console

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [GeminiAPI] Token usage: {
        model: undefined,
        inputTokens: 180,
        outputTokens: 320,
        estimatedCost: '0.000399'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [GeminiAPI] Token usage: {
        model: undefined,
        inputTokens: 180,
        outputTokens: 320,
        estimatedCost: '0.000399'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      Premium model test - Expected: gemini-pro

      at Object.<anonymous> (tests/gemini-agent.test.ts:233:13)

    console.log
      Premium model test - Actual: https://generativelanguage.googleapis.com/v1beta/models/undefined:generateContent?key=test-gemini-key

      at Object.<anonymous> (tests/gemini-agent.test.ts:234:13)

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [GeminiAPI] Gemini API error: Error: Gemini API error: 400 Invalid request
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:181:19)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at GeminiAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:257:24)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:251:20)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at Object.generateResponse (src/gemini/gemini-agent.ts:212:18)
      at GeminiAgent.analyze (src/gemini/gemini-agent.ts:257:24)
      at Object.<anonymous> (tests/gemini-agent.test.ts:251:20)

    console.error
Error: ERROR] [GeminiAgent] Error in Gemini agent Error: Gemini API error: 400 Invalid request
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:181:19)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at GeminiAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:257:24)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:251:20)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at GeminiAgent.handleError (src/gemini/gemini-agent.ts:480:17)
      at GeminiAgent.analyze (src/gemini/gemini-agent.ts:265:19)
      at Object.<anonymous> (tests/gemini-agent.test.ts:251:20)

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [GeminiAPI] Gemini API error: Error: Network error
          at /home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:274:22
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:148:19)
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:155:34)
          at GeminiAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:257:48)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:278:32)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at Object.generateResponse (src/gemini/gemini-agent.ts:212:18)
      at GeminiAgent.analyze (src/gemini/gemini-agent.ts:257:24)
      at Object.<anonymous> (tests/gemini-agent.test.ts:278:20)

    console.error
Error: ERROR] [GeminiAgent] Error in Gemini agent Error: Network error
          at /home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:274:22
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13
          at mockConstructor (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:148:19)
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:155:34)
          at GeminiAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/gemini/gemini-agent.ts:257:48)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/gemini-agent.test.ts:278:32)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at GeminiAgent.handleError (src/gemini/gemini-agent.ts:480:17)
      at GeminiAgent.analyze (src/gemini/gemini-agent.ts:265:19)
      at Object.<anonymous> (tests/gemini-agent.test.ts:278:20)

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [GeminiAPI] Token usage: {
        model: undefined,
        inputTokens: 600,
        outputTokens: 900,
        estimatedCost: '0.001155'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [GeminiAPI] Calling Gemini API with model: undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Prompt preview: Mock Gemini prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [GeminiAPI] Using premium model: false

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [GeminiAPI] Token usage: {
        model: undefined,
        inputTokens: 180,
        outputTokens: 320,
        estimatedCost: '0.000399'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

PASS src/multi-agent/__tests__/factory.test.ts
  ● Console

    console.error
Error: ERROR] [MultiAgentFactory] Invalid configuration: Invalid config undefined

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at MultiAgentFactory.createConfiguration (src/multi-agent/factory.ts:60:19)
      at src/multi-agent/__tests__/factory.test.ts:168:17
      at Object.<anonymous> (../../node_modules/expect/build/toThrowMatchers.js:74:11)
      at Object.throwingMatcher [as toThrow] (../../node_modules/expect/build/index.js:320:21)
      at Object.<anonymous> (src/multi-agent/__tests__/factory.test.ts:172:10)

    console.log
      [DEBUG] [MultiAgentFactory] Creating agent primary of type claude undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [MultiAgentFactory] Creating agent secondary-0 of type openai undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

FAIL src/multi-agent/__tests__/temperature-optimization.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

PASS src/multi-agent/evaluation/__tests__/agent-selector.test.ts
  ● Console

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: performance undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role performance with score 78 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected mcp-code-review for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality, security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role security with score 76 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [INFO] [AgentSelector] Secondary agents not recommended for this context undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [INFO] [AgentSelector] Secondary agents not recommended for this context undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role security with score 76 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: performance undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: performance undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role performance with score 78 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality, security, performance undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role security with score 76 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: performance undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected deepseek-coder for role performance with score 78 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality, security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected mcp-code-review for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role security with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting multi-agent configuration for roles: codeQuality, security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: codeQuality undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected claude for role codeQuality with score 100 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [AgentSelector] Selecting agent for role: security undefined

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [AgentSelector] Selected openai for role security with score 96.5 undefined

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

PASS src/multi-agent/__tests__/sequential-execution.test.ts
PASS tests/deepseek-agent.test.ts
  ● Console

    console.log
      [DEBUG] [DeepSeekAPI] Calling DeepSeek API with model: deepseek-coder-33b-instruct

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [DeepSeekAPI] Prompt preview: Mock DeepSeek prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [DeepSeekAPI] Token usage: {
        model: 'deepseek-coder-33b-instruct',
        inputTokens: 150,
        outputTokens: 250,
        estimatedCost: '0.000355'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

    console.log
      [DEBUG] [DeepSeekAPI] Calling DeepSeek API with model: deepseek-coder-33b-instruct

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [DeepSeekAPI] Prompt preview: Mock DeepSeek prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [DeepSeekAPI] DeepSeek API error: Error: DeepSeek API error: 400 Invalid request
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/deepseek/deepseek-agent.ts:176:19)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at DeepSeekAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/deepseek/deepseek-agent.ts:229:24)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/deepseek-agent.test.ts:177:20)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at Object.generateResponse (src/deepseek/deepseek-agent.ts:206:18)
      at DeepSeekAgent.analyze (src/deepseek/deepseek-agent.ts:229:24)
      at Object.<anonymous> (tests/deepseek-agent.test.ts:177:20)

    console.error
Error: ERROR] [DeepSeekAgent] Error in DeepSeek agent Error: DeepSeek API error: 400 Invalid request
          at Object.generateResponse (/home/runner/work/codequal/codequal/packages/agents/src/deepseek/deepseek-agent.ts:176:19)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at DeepSeekAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/deepseek/deepseek-agent.ts:229:24)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/deepseek-agent.test.ts:177:20)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at DeepSeekAgent.handleError (src/deepseek/deepseek-agent.ts:473:17)
      at DeepSeekAgent.analyze (src/deepseek/deepseek-agent.ts:234:19)
      at Object.<anonymous> (tests/deepseek-agent.test.ts:177:20)

    console.log
      [DEBUG] [DeepSeekAPI] Calling DeepSeek API with model: deepseek-coder-33b-instruct

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [DeepSeekAPI] Prompt preview: Mock DeepSeek prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [DeepSeekAPI] DeepSeek API error: Error: Network error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/deepseek-agent.test.ts:202:55)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at Object.generateResponse (src/deepseek/deepseek-agent.ts:206:18)
      at DeepSeekAgent.analyze (src/deepseek/deepseek-agent.ts:229:24)
      at Object.<anonymous> (tests/deepseek-agent.test.ts:205:20)

    console.error
Error: ERROR] [DeepSeekAgent] Error in DeepSeek agent Error: Network error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/deepseek-agent.test.ts:202:55)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at DeepSeekAgent.handleError (src/deepseek/deepseek-agent.ts:473:17)
      at DeepSeekAgent.analyze (src/deepseek/deepseek-agent.ts:234:19)
      at Object.<anonymous> (tests/deepseek-agent.test.ts:205:20)

    console.log
      [DEBUG] [DeepSeekAPI] Calling DeepSeek API with model: deepseek-coder-33b-instruct

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [DeepSeekAPI] Prompt preview: Mock DeepSeek prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [INFO] [DeepSeekAPI] Token usage: {
        model: 'deepseek-coder-33b-instruct',
        inputTokens: 500,
        outputTokens: 800,
        estimatedCost: '0.001150'
      }

      at Object.info (tests/__mocks__/@codequal/core/utils/index.ts:33:15)

FAIL src/multi-agent/__tests__/registry.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

PASS tests/chatgpt-agent.final.test.ts
  ● Console

    console.error
Error: ERROR] [TestChatGPTAgent] Error during analysis: Error: OpenAI API error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/chatgpt-agent.final.test.ts:56:43)
          at Runtime._execModule (/home/runner/work/codequal/codequal/node_modules/jest-runtime/build/index.js:1439:24)
          at Runtime._loadModule (/home/runner/work/codequal/codequal/node_modules/jest-runtime/build/index.js:1022:12)
          at Runtime.requireModule (/home/runner/work/codequal/codequal/node_modules/jest-runtime/build/index.js:882:12)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

Error: @codequal/agents#test: command (/home/runner/work/codequal/codequal/packages/agents) /opt/hostedtoolcache/node/18.20.8/x64/bin/npm run test exited (1)
 ERROR  run failed: command  exited (1)
      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at TestChatGPTAgent.handleError (src/base/base-agent.ts:62:17)
      at TestChatGPTAgent.analyze (src/chatgpt/chatgpt-agent.ts:248:19)
      at Object.<anonymous> (tests/chatgpt-agent.final.test.ts:208:20)

PASS src/multi-agent/__tests__/types.test.ts
PASS tests/chatgpt-agent.local.test.js
PASS src/multi-agent/__tests__/executor/specialized-execution.test.ts
FAIL src/multi-agent/__tests__/factory-adaptive.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

PASS src/multi-agent/__tests__/executor/basic-execution.test.ts
PASS tests/chatgpt-agent.test.ts
  ● Console

    console.error
Error: ERROR] [TestChatGPTAgent] Error during analysis: Error: OpenAI API error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/chatgpt-agent.test.ts:178:47)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at TestChatGPTAgent.handleError (src/base/base-agent.ts:62:17)
      at TestChatGPTAgent.analyze (src/chatgpt/chatgpt-agent.ts:248:19)
      at Object.<anonymous> (tests/chatgpt-agent.test.ts:187:20)

PASS tests/claude-agent.test.ts
  ● Console

    console.log
      [DEBUG] [ClaudeAPI] Calling Claude API with model: claude-3-haiku-20240307

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [ClaudeAPI] Prompt preview: Mock prompt template...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [TestClaudeAgent] Error in Claude agent Error: API error
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/claude-agent.test.ts:154:53)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at TestClaudeAgent.handleError (src/claude/claude-agent.ts:374:17)
      at TestClaudeAgent.analyze (src/claude/claude-agent.ts:159:19)
      at Object.<anonymous> (tests/claude-agent.test.ts:161:20)

PASS tests/chatgpt-nested.test.ts
  ● Console

    console.error
Error: ERROR] [TestChatGPTAgent] Error during analysis: Error: OpenAI API error: Invalid API key
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/chatgpt-nested.test.ts:163:47)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at TestChatGPTAgent.handleError (src/base/base-agent.ts:62:17)
      at TestChatGPTAgent.analyze (src/chatgpt/chatgpt-agent.ts:248:19)
      at Object.<anonymous> (tests/chatgpt-nested.test.ts:172:20)

PASS tests/chatgpt-agent.chatgpt.test.ts
  ● Console

    console.log
      [DEBUG] [OpenAIAPI] Calling OpenAI API with model: gpt-4-turbo-preview

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.log
      [DEBUG] [OpenAIAPI] Prompt preview: [{"role":"system","content":"Test prompt template"},{"role":"user","content":"Test prompt template"}...

      at Object.debug (tests/__mocks__/@codequal/core/utils/index.ts:29:15)

    console.error
Error: ERROR] [ChatGPTAgent] Error during analysis: Error: Invalid API key
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/chatgpt-agent.chatgpt.test.ts:181:35)
          at /home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:397:39
          at Object.<anonymous> (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:404:13)
          at Object.mockConstructor [as create] (/home/runner/work/codequal/codequal/node_modules/jest-mock/build/index.js:148:19)
          at ChatGPTAgent.analyze (/home/runner/work/codequal/codequal/packages/agents/src/chatgpt/chatgpt-agent.ts:234:65)
          at Object.<anonymous> (/home/runner/work/codequal/codequal/packages/agents/tests/chatgpt-agent.chatgpt.test.ts:191:37)
          at Promise.then.completed (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:316:40)
          at processTicksAndRejections (node:internal/process/task_queues:95:5)
          at _runTest (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/codequal/codequal/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/codequal/codequal/node_modules/jest-runner/build/testWorker.js:106:12)

      39 |     error(message: string, data?: LoggableData): void {
      40 |       // Mock implementation for tests
    > 41 |       console.error(`[ERROR] [${name}]`, message, data);
         |               ^
      42 |     },
      43 |   };
      44 | }

      at Object.error (tests/__mocks__/@codequal/core/utils/index.ts:41:15)
      at ChatGPTAgent.handleError (src/base/base-agent.ts:62:17)
      at ChatGPTAgent.analyze (src/chatgpt/chatgpt-agent.ts:248:19)
      at Object.<anonymous> (tests/chatgpt-agent.chatgpt.test.ts:191:20)

PASS src/multi-agent/__tests__/executor/error-handling.test.ts
PASS src/multi-agent/__tests__/executor.test.ts

Summary of all failing tests
FAIL src/multi-agent/__tests__/integration.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

FAIL src/multi-agent/__tests__/specialized-agents.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

FAIL src/multi-agent/__tests__/temperature-optimization.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

FAIL src/multi-agent/__tests__/registry.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~

FAIL src/multi-agent/__tests__/factory-adaptive.test.ts
  ● Test suite failed to run

    src/factory/multi-agent-strategy.ts:248:41 - error TS2304: Cannot find name 'Insight'.

    248     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:252:44 - error TS2304: Cannot find name 'Suggestion'.

    252     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:256:44 - error TS2304: Cannot find name 'EducationalContent'.

    256     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:265:39 - error TS2304: Cannot find name 'Insight'.

    265       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:275:42 - error TS2304: Cannot find name 'Suggestion'.

    275       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:285:42 - error TS2304: Cannot find name 'EducationalContent'.

    285       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:297:34 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:297:46 - error TS2304: Cannot find name 'Insight'.

    297       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~
    src/factory/multi-agent-strategy.ts:396:38 - error TS2304: Cannot find name 'Insight'.

    396     primary.insights?.forEach((item: Insight) =>
                                             ~~~~~~~
    src/factory/multi-agent-strategy.ts:400:41 - error TS2304: Cannot find name 'Suggestion'.

    400     primary.suggestions?.forEach((item: Suggestion) =>
                                                ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:404:41 - error TS2304: Cannot find name 'EducationalContent'.

    404     primary.educational?.forEach((item: EducationalContent) =>
                                                ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:409:39 - error TS2304: Cannot find name 'Insight'.

    409     enhanced.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:418:42 - error TS2304: Cannot find name 'Suggestion'.

    418     enhanced.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:427:42 - error TS2304: Cannot find name 'EducationalContent'.

    427     enhanced.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:569:41 - error TS2304: Cannot find name 'Insight'.

    569     results[0].insights?.forEach((item: Insight) =>
                                                ~~~~~~~
    src/factory/multi-agent-strategy.ts:573:44 - error TS2304: Cannot find name 'Suggestion'.

    573     results[0].suggestions?.forEach((item: Suggestion) =>
                                                   ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:577:44 - error TS2304: Cannot find name 'EducationalContent'.

    577     results[0].educational?.forEach((item: EducationalContent) =>
                                                   ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:586:39 - error TS2304: Cannot find name 'Insight'.

    586       result.insights?.forEach((item: Insight) => {
                                              ~~~~~~~
    src/factory/multi-agent-strategy.ts:596:42 - error TS2304: Cannot find name 'Suggestion'.

    596       result.suggestions?.forEach((item: Suggestion) => {
                                                 ~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:606:42 - error TS2304: Cannot find name 'EducationalContent'.

    606       result.educational?.forEach((item: EducationalContent) => {
                                                 ~~~~~~~~~~~~~~~~~~
    src/factory/multi-agent-strategy.ts:618:34 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                         ~~~~~~~
    src/factory/multi-agent-strategy.ts:618:46 - error TS2304: Cannot find name 'Insight'.

    618       combined.insights.sort((a: Insight, b: Insight) => {
                                                     ~~~~~~~


Test Suites: 5 failed, 22 passed, 27 total
Tests:       172 passed, 172 total
Snapshots:   0 total
Time:        11.381 s
Ran all test suites.
npm error Lifecycle script `test` failed with error:
npm error code 1
npm error path /home/runner/work/codequal/codequal/packages/agents
npm error workspace @codequal/agents@0.1.0
npm error location /home/runner/work/codequal/codequal/packages/agents
npm error command failed
npm error command sh -c jest --testPathIgnorePatterns=tests/archive/
Error:  command finished with error: command (/home/runner/work/codequal/codequal/packages/agents) /opt/hostedtoolcache/node/18.20.8/x64/bin/npm run test exited (1)

 Tasks:    2 successful, 3 total
Cached:    2 cached, 3 total
  Time:    12.066s 
Failed:    @codequal/agents#test

Error: Process completed with exit code 1.
0s
1s
