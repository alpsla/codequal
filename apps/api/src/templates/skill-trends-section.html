<!-- Skill Trends Section Template -->
<style>
  .skill-trends {
    margin-top: 30px;
  }
  
  .skill-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  
  .skill-card {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 20px;
    position: relative;
  }
  
  .skill-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  
  .skill-name {
    font-weight: 600;
    color: #495057;
    font-size: 1.1em;
  }
  
  .skill-level {
    background: linear-gradient(90deg, #667eea, #764ba2);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: 500;
  }
  
  .skill-trend {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }
  
  .trend-arrow {
    font-size: 1.2em;
  }
  
  .trend-arrow.up {
    color: #27ae60;
  }
  
  .trend-arrow.down {
    color: #e74c3c;
  }
  
  .trend-arrow.stable {
    color: #95a5a6;
  }
  
  .trend-text {
    font-size: 0.9em;
    color: #6c757d;
  }
  
  .skill-bar {
    width: 100%;
    height: 10px;
    background: #e9ecef;
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 10px;
  }
  
  .skill-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: width 0.5s ease;
    position: relative;
  }
  
  .skill-fill::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    width: 3px;
    height: 100%;
    background: rgba(255,255,255,0.5);
  }
  
  .skill-history {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-top: 10px;
    font-size: 0.85em;
    color: #6c757d;
  }
  
  .skill-impact {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #dee2e6;
  }
  
  .impact-item {
    display: flex;
    align-items: center;
    gap: 5px;
    margin: 5px 0;
    font-size: 0.9em;
  }
  
  .impact-positive {
    color: #27ae60;
  }
  
  .impact-negative {
    color: #e74c3c;
  }
  
  .skill-recommendation {
    background: #e3f2fd;
    border: 1px solid #bbdefb;
    border-radius: 6px;
    padding: 10px;
    margin-top: 10px;
    font-size: 0.9em;
  }
</style>

<div class="section skill-trends">
  <h2>üìà Skill Development Trends</h2>
  <p>Track your skill progression based on PR analysis and educational engagement:</p>
  
  <div class="skill-grid">
    <!-- Security Skills -->
    <div class="skill-card">
      <div class="skill-header">
        <span class="skill-name">üõ°Ô∏è Security</span>
        <span class="skill-level">Level {{security_level}}/10</span>
      </div>
      
      <div class="skill-trend">
        <span class="trend-arrow {{security_trend_class}}">{{security_trend_arrow}}</span>
        <span class="trend-text">{{security_trend_text}}</span>
      </div>
      
      <div class="skill-bar">
        <div class="skill-fill" style="width: {{security_percentage}}%"></div>
      </div>
      
      <div class="skill-history">
        <span>Previous: {{security_previous}} ‚Üí Current: {{security_current}}</span>
      </div>
      
      <div class="skill-impact">
        {{#if security_degradation}}
        <div class="impact-item impact-negative">
          <span>‚ö†Ô∏è</span>
          <span>-{{security_degradation}} points: {{security_issues_count}} critical/high issues found</span>
        </div>
        {{/if}}
        {{#if security_improvement}}
        <div class="impact-item impact-positive">
          <span>‚úÖ</span>
          <span>+{{security_improvement}} points: Clean security implementation</span>
        </div>
        {{/if}}
      </div>
      
      {{#if security_recommendation}}
      <div class="skill-recommendation">
        üí° {{security_recommendation}}
      </div>
      {{/if}}
    </div>
    
    <!-- Code Quality Skills -->
    <div class="skill-card">
      <div class="skill-header">
        <span class="skill-name">üìù Code Quality</span>
        <span class="skill-level">Level {{quality_level}}/10</span>
      </div>
      
      <div class="skill-trend">
        <span class="trend-arrow {{quality_trend_class}}">{{quality_trend_arrow}}</span>
        <span class="trend-text">{{quality_trend_text}}</span>
      </div>
      
      <div class="skill-bar">
        <div class="skill-fill" style="width: {{quality_percentage}}%"></div>
      </div>
      
      <div class="skill-history">
        <span>Previous: {{quality_previous}} ‚Üí Current: {{quality_current}}</span>
      </div>
      
      <div class="skill-impact">
        {{#if quality_degradation}}
        <div class="impact-item impact-negative">
          <span>‚ö†Ô∏è</span>
          <span>-{{quality_degradation}} points: Code quality issues detected</span>
        </div>
        {{/if}}
        {{#if quality_improvement}}
        <div class="impact-item impact-positive">
          <span>‚úÖ</span>
          <span>+{{quality_improvement}} points: Clean code practices</span>
        </div>
        {{/if}}
      </div>
      
      {{#if quality_recommendation}}
      <div class="skill-recommendation">
        üí° {{quality_recommendation}}
      </div>
      {{/if}}
    </div>
    
    <!-- Architecture Skills -->
    <div class="skill-card">
      <div class="skill-header">
        <span class="skill-name">üèóÔ∏è Architecture</span>
        <span class="skill-level">Level {{architecture_level}}/10</span>
      </div>
      
      <div class="skill-trend">
        <span class="trend-arrow {{architecture_trend_class}}">{{architecture_trend_arrow}}</span>
        <span class="trend-text">{{architecture_trend_text}}</span>
      </div>
      
      <div class="skill-bar">
        <div class="skill-fill" style="width: {{architecture_percentage}}%"></div>
      </div>
      
      <div class="skill-history">
        <span>Previous: {{architecture_previous}} ‚Üí Current: {{architecture_current}}</span>
      </div>
      
      {{#if architecture_recommendation}}
      <div class="skill-recommendation">
        üí° {{architecture_recommendation}}
      </div>
      {{/if}}
    </div>
    
    <!-- Performance Skills -->
    <div class="skill-card">
      <div class="skill-header">
        <span class="skill-name">‚ö° Performance</span>
        <span class="skill-level">Level {{performance_level}}/10</span>
      </div>
      
      <div class="skill-trend">
        <span class="trend-arrow {{performance_trend_class}}">{{performance_trend_arrow}}</span>
        <span class="trend-text">{{performance_trend_text}}</span>
      </div>
      
      <div class="skill-bar">
        <div class="skill-fill" style="width: {{performance_percentage}}%"></div>
      </div>
      
      <div class="skill-history">
        <span>Previous: {{performance_previous}} ‚Üí Current: {{performance_current}}</span>
      </div>
      
      {{#if performance_recommendation}}
      <div class="skill-recommendation">
        üí° {{performance_recommendation}}
      </div>
      {{/if}}
    </div>
  </div>
  
  {{#if active_degradations}}
  <div style="margin-top: 30px; padding: 20px; background: #fff5f5; border-radius: 8px; border: 1px solid #ffcccc;">
    <h4 style="margin-top: 0; color: #dc3545;">‚ö†Ô∏è Active Skill Degradations</h4>
    <p style="margin-bottom: 15px;">You have unresolved repository issues affecting your skill levels:</p>
    
    {{#each active_degradations}}
    <div style="margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border: 1px solid #ffdddd;">
      <h5 style="margin-top: 0; color: #495057;">{{repository}}</h5>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
        <div>
          <strong>Total Issues:</strong> {{issue_count}}
        </div>
        <div>
          <strong>Degradation:</strong> <span style="color: #dc3545;">-{{total_degradation}} points</span>
        </div>
      </div>
      {{#if by_severity}}
      <div style="margin-top: 10px; font-size: 0.9em;">
        <strong>By Severity:</strong>
        {{#each by_severity}}
        <span style="margin-left: 10px;">{{@key}}: {{count}} issues (-{{degradation}} pts)</span>
        {{/each}}
      </div>
      {{/if}}
    </div>
    {{/each}}
    
    <div style="margin-top: 15px; padding: 10px; background: #f8d7da; border-radius: 4px;">
      <strong>üí° Fix these issues to:</strong>
      <ul style="margin: 5px 0 0 20px;">
        <li>Stop skill degradation immediately</li>
        <li>Earn skill points based on severity (Critical: +2.0, High: +1.5, Medium: +0.8, Low: +0.3)</li>
        <li>Improve your overall skill ratings</li>
      </ul>
    </div>
  </div>
  {{/if}}
  
  {{#if recent_resolutions}}
  <div style="margin-top: 30px; padding: 20px; background: #d4edda; border-radius: 8px; border: 1px solid #c3e6cb;">
    <h4 style="margin-top: 0; color: #155724;">‚úÖ Recent Issue Resolutions</h4>
    <p style="margin-bottom: 15px;">Congratulations! You've recently fixed these repository issues:</p>
    
    {{#each recent_resolutions}}
    <div style="margin-bottom: 10px; padding: 10px; background: white; border-radius: 4px; border: 1px solid #d4edda;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong>{{category}}</strong> - {{severity}} issue in {{repository}}
        </div>
        <div style="color: #155724; font-weight: bold;">
          +{{points}} points
        </div>
      </div>
      {{#if pr_number}}
      <div style="font-size: 0.85em; color: #6c757d; margin-top: 5px;">
        Fixed in PR #{{pr_number}} on {{resolved_at}}
      </div>
      {{/if}}
    </div>
    {{/each}}
  </div>
  {{/if}}
  
  <div style="margin-top: 30px; padding: 20px; background: #f0f7ff; border-radius: 8px; border: 1px solid #b8daff;">
    <h4 style="margin-top: 0; color: #004085;">üìä Overall Progress Summary</h4>
    <p style="margin-bottom: 10px;">Your overall skill trend is <strong>{{overall_trend}}</strong> based on recent PR analyses.</p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
      <div>
        <strong>Total PRs Analyzed:</strong> {{total_prs}}
      </div>
      <div>
        <strong>Average Complexity:</strong> {{avg_complexity}}/10
      </div>
      <div>
        <strong>Success Rate:</strong> {{success_rate}}%
      </div>
      <div>
        <strong>Time Period:</strong> {{time_period}}
      </div>
    </div>
  </div>
</div>