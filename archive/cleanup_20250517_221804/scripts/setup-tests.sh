#!/bin/bash

# Make the manual test script executable
chmod +x /Users/alpinro/Code\ Prjects/codequal/packages/core/src/deepwiki/manual-test.js
chmod +x /Users/alpinro/Code\ Prjects/codequal/packages/core/src/deepwiki/run-manual-test.sh

# Create the test results directory if it doesn't exist
mkdir -p /Users/alpinro/Code\ Prjects/codequal/packages/core/src/deepwiki/test-results

# Display usage instructions
echo "DeepWiki Manual Test Scripts"
echo "==========================="
echo ""
echo "These scripts allow you to manually test the DeepWiki API with different providers and models."
echo ""
echo "JavaScript Test Script (recommended):"
echo "--------------------------------"
echo "This script provides more detailed analysis of the results."
echo ""
echo "Usage examples:"
echo ""
echo "1. Wiki generation with OpenAI GPT-4o:"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=wiki --provider=openai --model=gpt-4o"
echo ""
echo "2. Wiki generation with Google Gemini:"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=wiki --provider=google --model=gemini-2.5-pro-preview-05-06"
echo ""
echo "3. Wiki generation with Claude:"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=wiki --provider=openrouter --model=anthropic/claude-3.7-sonnet"
echo ""
echo "4. Chat completion with architecture query:"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=chat --provider=openai --model=gpt-4o"
echo ""
echo "5. Chat completion with custom query:"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=chat --provider=openai --model=gpt-4o --query=\"What design patterns are used in this repository?\""
echo ""
echo "6. Verbose output (with full content):"
echo "   node packages/core/src/deepwiki/manual-test.js --repo=pallets/click --mode=wiki --provider=openai --model=gpt-4o --verbose=true"
echo ""
echo ""
echo "Bash Test Script (alternative):"
echo "---------------------------"
echo "This script provides a simpler interface with less detailed analysis."
echo ""
echo "Usage examples:"
echo ""
echo "1. Wiki generation with OpenAI GPT-4o:"
echo "   bash packages/core/src/deepwiki/run-manual-test.sh --repo=pallets/click --mode=wiki --provider=openai --model=gpt-4o"
echo ""
echo "2. Chat completion with architecture query:"
echo "   bash packages/core/src/deepwiki/run-manual-test.sh --repo=pallets/click --mode=chat --provider=openai --model=gpt-4o"
echo ""
echo ""
echo "All test results will be saved in packages/core/src/deepwiki/test-results/"
echo ""
echo "Port Forwarding Reminder:"
echo "----------------------"
echo "Remember to set up port forwarding to access the DeepWiki API:"
echo ""
echo "kubectl port-forward -n codequal-dev $(kubectl get pods -n codequal-dev -l app=deepwiki -o jsonpath='{.items[0].metadata.name}') 8001:8001"
echo ""
